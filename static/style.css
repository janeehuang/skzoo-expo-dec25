/* =========================================
   1. æ ¸å¿ƒèƒŒæ™¯èˆ‡åŸºç¤è¨­å®š
   ========================================= */
body {
    /* æ¼¸å±¤æ‹¿éµè‰²èƒŒæ™¯ */
    background: linear-gradient(to bottom, #D9C5B2, #9E7E56);
    background-attachment: fixed;
    color: #FDFBF7;
    
    /* å¯æ„›å­—é«”è¨­å®š */
    font-family: 'Comic Sans MS', 'å¾®è»Ÿæ­£é»‘é«”', 'Helvetica Neue', Arial, sans-serif;
    
    text-align: center;
    margin: 0;
    padding: 20px;
    overflow-x: hidden; /* éš±è—æ°´å¹³å·è»¸ */
    min-height: 100vh;
    position: relative;
}

h1 {
    margin-bottom: 30px;
    letter-spacing: 1px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
    position: relative;
    z-index: 1;
}

/* =========================================
   â„ï¸ é›ªèŠ±å‹•ç•«ç‰¹æ•ˆ
   ========================================= */
body::before, body::after {
    content: "";
    position: absolute;
    top: -100%;
    left: 0;
    width: 100%;
    height: 200%;
    pointer-events: none; /* è®“é»æ“Šç©¿é€é›ªèŠ± */
    background-image: 
        radial-gradient(6px 6px at 10% 10%, #FDFBF7 50%, transparent 50%),
        radial-gradient(4px 4px at 20% 30%, #FDFBF7 50%, transparent 50%),
        radial-gradient(8px 8px at 30% 50%, #FDFBF7 50%, transparent 50%),
        radial-gradient(5px 5px at 40% 70%, #FDFBF7 50%, transparent 50%),
        radial-gradient(7px 7px at 50% 90%, #FDFBF7 50%, transparent 50%),
        radial-gradient(4px 4px at 60% 10%, #FDFBF7 50%, transparent 50%),
        radial-gradient(8px 8px at 70% 30%, #FDFBF7 50%, transparent 50%),
        radial-gradient(5px 5px at 80% 50%, #FDFBF7 50%, transparent 50%),
        radial-gradient(6px 6px at 90% 70%, #FDFBF7 50%, transparent 50%),
        radial-gradient(4px 4px at 15% 85%, #FDFBF7 50%, transparent 50%),
        radial-gradient(7px 7px at 35% 25%, #FDFBF7 50%, transparent 50%),
        radial-gradient(5px 5px at 55% 45%, #FDFBF7 50%, transparent 50%),
        radial-gradient(8px 8px at 75% 65%, #FDFBF7 50%, transparent 50%),
        radial-gradient(4px 4px at 95% 5%, #FDFBF7 50%, transparent 50%);
    background-size: 500px 500px;
    animation-name: snow;
    animation-timing-function: linear;
    animation-iteration-count: infinite;
    z-index: 0; /* åœ¨èƒŒæ™¯å±¤ */
}
body::before { animation-duration: 20s; opacity: 0.7; }
body::after { background-size: 600px 600px; animation-duration: 12s; opacity: 0.9; }

@keyframes snow {
    0% { transform: translateY(0); }
    100% { transform: translateY(500px); }
}

/* =========================================
   ğŸ”˜ æŒ‰éˆ•æ¨£å¼ (å•å·èˆ‡è¿”å›)
   ========================================= */

.button-group {
    text-align: center;
    margin-bottom: 30px;
    position: relative; 
    z-index: 2;
}
.survey-btn, .timeline-btn, .back-btn {
display: inline-block;
    background-color: #A0522D; /* åŸæœ¬çš„æ‹¿éµæ£•è‰² */
    color: #ffffff;
    padding: 12px 25px;
    
    /* é€™è£¡é‡è¦ï¼šå·¦å³å„çµ¦ 10px é–“è·ï¼Œè®“æŒ‰éˆ•åˆ†é–‹ */
    margin: 0 10px; 
    
    border-radius: 50px;
    text-decoration: none;
    font-weight: bold;
    font-size: 1.1em;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    transition: all 0.3s ease;
    cursor: pointer;
}


.survey-btn:hover, .timeline-btn:hover {
    background-color: #8B4513; /* æ·±ä¸€é»çš„é¡è‰² */
    transform: translateY(-3px);
    box-shadow: 0 6px 15px rgba(0,0,0,0.4);
}

/* --- (é¸ç”¨) å¦‚æœä½ æƒ³è®“ã€Œæ™‚é–“ç·šã€æŒ‰éˆ•é¡è‰²ç¨å¾®æ·±ä¸€é» --- */
/* å¦‚æœæƒ³è¦å…©é¡†é¡è‰²ä¸€æ¨¡ä¸€æ¨£ï¼Œä¸‹é¢é€™æ®µå¯ä»¥ä¸ç”¨åŠ  */
.timeline-btn {
    background-color: #6D4C41; /* æ·±å’–å•¡è‰² */
}
.timeline-btn:hover {
    background-color: #4E342E; /* æ›´æ·±çš„å’–å•¡è‰² */
}

/* =========================================
   3. ç•™è¨€ç‰†ä½ˆå±€ (ä¿®æ”¹ç‚ºï¼šæ©«å‘æ–°å¢æ’åˆ—)
   ========================================= */

.gallery {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
    
    /* âœ¨ é—œéµä¿®æ”¹ï¼šåŠ å…¥é€™è¡Œï¼ */
    /* è®“å¡ç‰‡é«˜åº¦ã€Œä¾å…§å®¹å¤šå¯¡æ±ºå®šã€ï¼Œä¸è¦è‡ªå‹•æ‹‰é•·è£œæ»¿ */
    align-items: start;
    
    padding: 10px;
    position: relative; 
    z-index: 1;
    max-width: 1400px;
    margin: 0 auto;
    text-align: left;
}

/* --- å¡ç‰‡è¨­å®š --- */
.card {
    background-color: #FDFBF7;
    border-radius: 12px;
    overflow: hidden;
    
    /* âœ¨ é—œéµä¿®æ”¹ï¼šè®“ Grid æ±ºå®šå¯¬åº¦ï¼Œé€™è£¡ä¸ç”¨è¨­ width */
    display: block; 
    width: auto; 
    margin-bottom: 0; /* Grid å·²ç¶“æœ‰ gap äº†ï¼Œä¸éœ€è¦é¡å¤– margin */
    
    box-shadow: 0 4px 15px rgba(60, 40, 20, 0.3);
    
    /* é€²å ´å‹•ç•« (ä¿ç•™ä½ åŸæœ¬å–œæ­¡çš„å½ˆå‡ºæ•ˆæœ) */
    animation: popIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) backwards;
    transition: transform 0.2s;
}

.card:hover { 
    transform: translateY(-5px); 
}

.card-content {
    /* âœ¨ é—œéµä¿®æ”¹ï¼šä¸Šæ–¹ padding æ”¹ç‚º 0 */
    /* é †åºæ˜¯ï¼šä¸Š(0) å³(15) ä¸‹(15) å·¦(15) */
    padding: 0 15px 15px 15px;
    
    font-family: 'Comic Sans MS', 'å¾®è»Ÿæ­£é»‘é«”', sans-serif;
}
.nickname { 
    color: #A0522D; 
    font-weight: bold; 
    font-size: 1.1em; 
    
    /* âœ¨ ç¨å¾®åŠ ä¸€é»é»è·é›¢å°±å¥½ (åŸæœ¬å¯èƒ½æ˜¯ 0) */
    margin-top: 10px; 
    
    margin-bottom: 5px; 
    display: flex; 
    align-items: center; 
}
.message { color: #5D4037; font-size: 0.95em; margin-bottom: 10px; line-height: 1.4; word-wrap: break-word; }
.timestamp { color: #8D6E63; font-size: 0.8em; }
.badge { background-color: #D7CCC8; color: #5D4037; font-size: 0.7em; padding: 2px 8px; border-radius: 10px; margin-left: 8px; border: 1px solid #A1887F; }

/* è¼ªæ’­ç”¨ */
.slideshow-container { position: relative; width: 100%; min-height: 0; }
.slide-img { width: 100%; height: auto; display: none; vertical-align: bottom; }
.slide-img.active { display: block; }


/* =========================================
   âœ¨ æ™‚é–“è»¸è¡¨æ ¼æ ¸å¿ƒ (Timeline) âœ¨
   ========================================= */

.timeline-table-container {
    width: 100%;
    overflow-x: auto;
    margin-top: 20px;
    padding-bottom: 80px;
}

.skz-matrix {
    border-collapse: separate; 
    border-spacing: 0;
    margin: 0 auto;
    min-width: 1100px;
}

/* --- è¡¨é ­ (Sticky Header) --- */
.skz-matrix th {
    width: 160px;
    background-color: #8B4513; 
    color: #FDFBF7;
    padding: 15px 5px; 
    position: sticky; 
    top: 0; 
    z-index: 100;
    border-bottom: 4px solid #5D4037; 
    width: 180px;
}
.skz-matrix th.head-year { position: sticky; left: 0; width: 80px; background-color: #5D4037; z-index: 102; }
.skz-matrix th.head-album { position: sticky; left: 80px; width: 150px; background-color: #8B4513; z-index: 102; border-right: 2px solid #D7CCC8; }

/* --- å…§å®¹æ¬„ä½è¨­å®š --- */

/* 1. å¹´ä»½æ¬„ï¼šé€æ˜èƒŒæ™¯ + 8px ç²—ç›´ç·š */
.col-year {
    position: sticky; 
    left: 0;
    background-color: transparent !important; /* å¼·åˆ¶é€æ˜ */
    z-index: 50; 
    width: 80px;
    text-align: right; 
    vertical-align: top;
    padding: 20px 10px 0 0;
    color: #A0522D; 
    font-weight: bold; 
    font-size: 1.3em;
    
    /* é€™è£¡è¨­å®šé‚£æ¢è²«ç©¿ä¸Šä¸‹çš„ç²—ç·š */
    border-right: 8px solid #D7CCC8; 
    border-bottom: none !important;
    border-top: none !important;
    
    /* ç¢ºä¿çªå‡ºçš„æ©‹æ¥ç·šä¸æœƒè¢«è£åˆ‡ */
    overflow: visible !important;
}

/* å¹´ä»½å°åœ“é» (Tå­—è·¯å£é€£æ¥ç‰ˆ) */
.year-marker {
    display: inline-block;
    width: 16px;
    height: 16px;
    background: #A0522D; 
    border-radius: 50%;
    position: absolute;
    right: -20px; /* æ°´å¹³ç½®ä¸­æ–¼ 8px ç·šä¸Š */
    top: -6px;    /* å‚ç›´èª¿æ•´ */
    z-index: 60;
}

/* 2. å¹´ä»½æ”¾å¤§ç‰¹æ•ˆ (JS æ§åˆ¶ active-row) */
.dynamic-year { 
    display: inline-block; 
    transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
    transform-origin: right center; 
}
tr.active-row .dynamic-year { 
    transform: scale(2.0); 
    color: #FFF; 
    text-shadow: 0 0 10px #8B4513; 
}

/* 3. å°ˆè¼¯æ¬„ï¼šé€æ˜èƒŒæ™¯ */
.col-album {
    position: sticky; 
    left: 80px;
    background-color: transparent !important;
    z-index: 50; 
    width: 150px;
    padding: 25px 5px 15px 5px; 
    text-align: left; 
    vertical-align: top; 
    font-weight: bold; 
    color: #5D4037;
    border: none !important;
}

/* 4. ç…§ç‰‡æ ¼ï¼šé€æ˜èƒŒæ™¯ + èƒŒæ™¯ç´°ç·š */
.photo-cell {
    position: relative; 
    padding: 10px 5px;
    background-color: transparent !important;
    border: none !important;
}
/* ç…§ç‰‡èƒŒå¾Œçš„ç´°ç·š (è²«ç©¿ç…§ç‰‡ç”¨) */
.photo-cell::before {
    content: ''; 
    position: absolute;
    top: 0; bottom: 0; left: 50%;
    width: 4px; 
    background-color: rgba(215, 204, 200, 0.4);
    transform: translateX(-50%); 
    z-index: 0;
}

/* =========================================
   ğŸ› ï¸ åˆ†ç•Œç·šæ¨£å¼ (æ­æ©‹ä¿®å¾©ç‰ˆ)
   ========================================= */

/* 1. è®“å…§å®¹å¾€ä¸‹ç§»ï¼Œç•™å‡ºç©ºé–“çµ¦æ©«ç·š */
tr.new-year-separator td {
    padding-top: 45px; 
}

/* 2. ç…§ç‰‡æ¬„ï¼šç•«å‡ºæ©«ç·š */
tr.new-year-separator .photo-cell {
    border-top: 4px solid #8B4513 !important;
}

/* 3. å°ˆè¼¯æ¬„ï¼šç”¨ ::before ç•«æ©«ç·š */
tr.new-year-separator .col-album {
    padding-top: 25px !important; 
}
tr.new-year-separator .col-album::before {
    content: '';
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 4px;
    background-color: #8B4513; 
    z-index: 55;
}

/* 4. âœ¨ é—œéµä¿®å¾©ï¼šå¹´ä»½æ¬„ä¼¸å‡ºçš„ã€Œæ©‹ã€ âœ¨ */
tr.new-year-separator .col-year::after {
    content: '';
    position: absolute;
    top: 0; right: -10px; /* è·¨è¶Šç¸«éš™ */
    width: 30px; height: 4px;
    background-color: #8B4513;
    z-index: 55;
}

/* =========================================
   ğŸ“¸ ç…§ç‰‡æ¨£å¼
   ========================================= */
.timeline-img {
    /* ğŸ”´ é—œéµä¿®æ”¹ï¼šè¨­å®šå›ºå®šçš„å¯¬åº¦èˆ‡é«˜åº¦ï¼Œè®Šæˆæ­£æ–¹å½¢æ¡†æ¡† */
    width: 160px;
    height: 160px;
    
    /* ğŸ”´ é—œéµä¿®æ”¹ï¼šè®“åœ–ç‰‡åœ¨æ¡†æ¡†å…§ã€Œä¿æŒæ¯”ä¾‹å®Œæ•´é¡¯ç¤ºã€ */
    object-fit: contain; 
    object-position: center; /* åœ–ç‰‡ç½®ä¸­ */

    display: block;
    margin: 0 auto;
    border-radius: 10px;
    border: 3px solid #FDFBF7;
    position: relative;
    z-index: 1;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    
    /* èƒŒæ™¯è‰²æ”¹é€æ˜ï¼Œä¸ç„¶ç›´å‘ç…§ç‰‡æ—é‚Šæœƒæœ‰å…©æ¢ç°è‰²çš„ */
    background-color: transparent; 
    
    opacity: 0.8;
    transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.3s;
}
.timeline-img:hover { 
    transform: scale(1.3); 
    z-index: 100; 
    border-color: #A0522D; 
    cursor: pointer; 
}

/* =========================================
   ğŸ¶ å‰ç¥¥ç‰©èˆ‡éŸ¿æ‡‰å¼
   ========================================= */
.fixed-mascot {
    position: fixed; 
    bottom: 0; right: 0;
    width: 700px;
    z-index: 1000;
    pointer-events: none;
}

@media (max-width: 768px) {
    .fixed-mascot { width: 250px; }
}